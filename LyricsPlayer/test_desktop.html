<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="script/lib/metadata_scripts.js"></script>
    <script src="script/lib/async_storage.js"></script>

    <title>Test</title>
</head>
<body>
<input type="file"><br/>
<img id="cover" src="">

<script type="text/javascript">
    document.querySelector('input[type="file"]').onchange = function (e) {
        /*
         Pass the File instance to ID3.js
         You could iterate over this.files to handle many at once
         */

        var file = this.files[0];
        parseAudioMetadata(file, function (metadata) {
            alert(metadata.artist + " - " + metadata.title);

            var fileinfo = {
                name: file.name,
                blob: file,
                metadata: metadata
            };

            getThumbnailURL(fileinfo, function (blobUrl) {
                alert("Image URL = " + blobUrl);
                document.getElementById("cover").src = blobUrl;
            });
        }, function (error) {
            alert(error);
        })

    };
</script>

</body>
</html>